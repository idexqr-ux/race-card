<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>The Race Card</title>

  <style>
    body {
      font-family: Georgia, "Times New Roman", Times, serif;
      color: #2b2b2b;
      background: #f7f6f3;
      line-height: 1.6;
      padding: 16px;
    }

    h1 {
      font-size: 1.4em;
      margin: 12px 0;
      color: #1f1f1f;
    }

    /* ASK — big, calm, phone-first */
    #askButton {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      width: 100%;
      max-width: 560px;
      margin: 0 auto 24px auto;

      min-height: 112px;
      padding: 20px;

      font-family: inherit;
      font-size: 2em;
      line-height: 1.1;

      border-radius: 999px;
      border: none;
      background: #ffffff;
      color: #2b2b2b;

      box-shadow: 0 3px 10px rgba(0,0,0,0.12);
      cursor: pointer;
    }

    .ask-sub {
      font-size: 0.8em;
      margin-top: 6px;
      color: #5a5a5a;
    }

    .panel {
      background: #ffffff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }

    #answerText {
      min-height: 3em;
      opacity: 0.85;
    }

  .back-link {
  display: inline-block;
  margin-top: 14px;

  font-size: 1.05em;      /* slightly clearer */
  color: #6a6a6a;

  padding: 12px 8px;      /* invisible finger comfort */
  border-radius: 10px;

  cursor: pointer;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

.back-link:hover {
  color: #2b2b2b;
}

    .back-link:hover {
      color: #2b2b2b;
    }
  </style>
</head>

<body>

  <div id="raceContext" aria-hidden="true">Race</div>

  <button id="askButton" type="button">
    <div>Ask</div>
    <div class="ask-sub">about the race card</div>
  </button>

  <h1>The Race Card</h1>

  <div class="panel">
    <p id="answerText">&nbsp;</p>
  </div>

  <div class="back-link" onclick="history.back()">
  ← Back to race
</div>

  <script>
const raceContext = document.getElementById('raceContext');
const params = new URLSearchParams(window.location.search);
const race = params.get('race');

if (raceContext) {
  raceContext.textContent = race ? `Race ${race}` : "Race";
}

  (function () {
    const btn = document.getElementById('askBtn');
    const status = document.getElementById('statusLine');
    const panel = document.getElementById('answerPanel');

    const answers = [
      "Tell me the exact phrase you’re looking at and I’ll expand it into plain race-day English — without guessing.",
      "If it’s a form comment, I can translate the shorthand into full meaning, staying factual.",
      "If it’s a term (OR, novice, handicap, going), I’ll explain it in one calm paragraph.",
      "If it’s colours, I’ll explain what they help you do — follow the right horse quickly and confidently."
    ];

    let i = 0;
    let state = "idle"; // idle | listening | answering

    function setState(next) {
      state = next;

      if (state === "idle") {
        status.textContent = "about the race card";
        panel.textContent = "";
        btn.setAttribute("aria-pressed", "false");
        return;
      }

      if (state === "listening") {
        status.textContent = "Listening…";
        panel.textContent = "Say your question as you would to the person beside you.";
        btn.setAttribute("aria-pressed", "true");
        return;
      }

      // answering
      status.textContent = "Answer";
      panel.textContent = answers[i % answers.length];
      i++;
      btn.setAttribute("aria-pressed", "false");
    }

    btn.addEventListener('click', () => {
      if (state === "idle") return setState("listening");
      if (state === "listening") return setState("answering");
      return setState("listening");
    });

    setState("idle");
  })();
</script>

</body>
</html>
